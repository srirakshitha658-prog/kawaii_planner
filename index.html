<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸŒ¸Kawaii PlannerðŸŒ¸</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body{font-family:'Poppins',sans-serif;margin:0;padding:0;background:linear-gradient(135deg,#ffe4e1,#fff0f5);min-height:100vh;}
header{text-align:center;padding:1.5rem;background:linear-gradient(90deg,#ffb6c1,#ff69b4);color:white;font-size:2rem;font-weight:700;box-shadow:0 4px 12px rgba(0,0,0,0.1);}
main{max-width:900px;margin:2rem auto;padding:1.5rem;background:#fff;border-radius:25px;box-shadow:0 8px 20px rgba(0,0,0,0.1);}
label{display:block;margin-top:1rem;font-weight:600;}
input,textarea{width:100%;padding:0.8rem;margin-top:0.3rem;border-radius:15px;border:2px solid #ffb6c1;font-size:1rem;transition:0.3s;}
input:focus,textarea:focus{border-color:#ff69b4;outline:none;}
button{margin-top:1.5rem;padding:0.9rem 1.8rem;background:#ff69b4;color:white;border:none;border-radius:20px;cursor:pointer;font-weight:700;font-size:1.15rem;width:100%;transition:0.3s;box-shadow:0 4px 12px rgba(0,0,0,0.1);}
button:hover{background:#ff85c1;transform:scale(1.02);}
#quotes{margin-top:1rem;text-align:center;font-style:italic;color:#ff69b4;font-weight:600;}
#output{margin-top:2rem;display:flex;flex-direction:column;}
.task{display:flex;align-items:center;justify-content:flex-start;background:linear-gradient(120deg,#fffaf0,#fff0f5);padding:0.8rem 1rem;margin-top:0.7rem;border-radius:15px;box-shadow:0 4px 8px rgba(0,0,0,0.08);transition:0.3s;cursor:grab;}
.task.dragging{opacity:0.5;}
.task input[type="checkbox"]{margin-right:0.8rem;width:20px;height:20px;cursor:pointer;}
.task span{font-weight:600;font-size:1rem;transition:0.3s;}
.task.done span{text-decoration: line-through; color:#999;}
.task-time{margin-right:0.8rem;font-weight:600;color:#ff69b4;}
.confetti-piece{position:absolute;width:10px;height:10px;opacity:0.8;pointer-events:none;animation:fall 3s linear forwards;}
@keyframes fall{to{transform: translateY(600px) rotate(360deg); opacity:0;}}
.smart-warning{color:#d9534f;font-weight:700;margin-top:0.5rem;}
@media(max-width:480px){.task span{font-size:0.95rem;}}
</style>
</head>
<body>
<header>ðŸŒ¸ Kawaii Planner ðŸŒ¸</header>
<main>
<div id="quotes"></div>
<label for="hours">Available Hours:</label>
<input type="text" id="hours" placeholder="e.g., 8:00-22:00">

<label for="tasks">Tasks (Name:Hours:Priority, one per line):</label>
<textarea id="tasks" rows="10" placeholder="Study Math:2:High&#10;Exercise:1:Medium&#10;Project Work:3:High&#10;Relax:1.5:Low&#10;Read Book:1:Medium"></textarea>

<label for="preferences">Preferences (optional):</label>
<textarea id="preferences" rows="2" placeholder="Breaks every 90 mins, avoid heavy work after 20:00"></textarea>

<button id="generate">Generate Smart Timetable ðŸŒ·</button>
<div id="output"></div>
</main>

<script>
// --- Helpers ---
function parseTimeToMinutes(t){const [h,m]=t.split(":").map(Number);return h*60+(m||0);}
function formatMinutesToTime(m){const h=Math.floor(m/60);const min=Math.round(m%60);return `${h.toString().padStart(2,'0')}:${min.toString().padStart(2,'0')}`;}
function confettiBurst(){for(let i=0;i<30;i++){let c=document.createElement('div');c.className='confetti-piece';c.style.left=Math.random()*window.innerWidth+'px';c.style.background=`hsl(${Math.random()*360},80%,70%)`;document.body.appendChild(c);setTimeout(()=>c.remove(),3000);}}

// --- Motivational Quotes ---
const quotes=[
  "ðŸŒ¸ Keep going, you're amazing!",
  "ðŸ’ª Every step counts, don't stop!",
  "â˜• Small progress is still progress.",
  "ðŸŒ± Focused today, strong tomorrow!",
  "ðŸ“ Your effort is your superpower!"
];

// --- Drag & Drop ---
let dragSrcEl=null;
function handleDragStart(e){dragSrcEl=this;this.classList.add('dragging'); e.dataTransfer.effectAllowed='move';}
function handleDragEnd(e){this.classList.remove('dragging');}
function handleDragOver(e){if(e.preventDefault)e.preventDefault();return false;}
function handleDrop(e){if(e.stopPropagation)e.stopPropagation(); if(dragSrcEl!==this){let output=document.getElementById('output');output.insertBefore(dragSrcEl,this);} return false;}

// --- Generate ---
document.getElementById('generate').addEventListener('click',()=>{
  const hoursInput=document.getElementById('hours').value||"8:00-22:00";
  const tasksInput=document.getElementById('tasks').value;
  const preferences=document.getElementById('preferences').value||"No special preferences";
  const output=document.getElementById('output'); output.innerHTML="";

  if(tasksInput.trim()===""){output.innerHTML="<p>ðŸŒ¸ Please enter some tasks! ðŸŒ¸</p>"; return;}

  // --- Random Quote ---
  document.getElementById('quotes').textContent = quotes[Math.floor(Math.random()*quotes.length)];

  const [start,end]=hoursInput.split("-").map(s=>s.trim());
  let startMin=parseTimeToMinutes(start), endMin=parseTimeToMinutes(end);

  let tasks=tasksInput.split("\n").map((line,i)=>{
    let [name,duration,priority]=line.split(":").map(s=>s.trim());
    return {name:name||`Task ${i+1}`, duration:Math.max(parseFloat(duration)*60,1), priority:priority||"Medium"};
  });

  const priorityMap={High:1, Medium:2, Low:3};
  const priorityColors={High:"#ffe4e1", Medium:"#fffacd", Low:"#e0ffe0"};
  const emojis={High:"ðŸŒ¸", Medium:"ðŸ’ª", Low:"â˜•"};

  // --- Sort high priority first
  tasks.sort((a,b)=>priorityMap[a.priority]-priorityMap[b.priority]);

  // --- Auto adjust durations
  let totalDuration=tasks.reduce((sum,t)=>sum+t.duration,0);
  let available=endMin-startMin;
  if(totalDuration>available){
    const factor=available/totalDuration;
    tasks.forEach(t=>{if(t.priority!=="High") t.duration=Math.ceil(t.duration*factor);});
    const warning=document.createElement("div");
    warning.className="smart-warning";
    warning.textContent="âš ï¸ Some lower-priority tasks were shortened to fit the available time.";
    output.appendChild(warning);
  }

  let current=startMin;
  let breakInterval=90, minSinceBreak=0;

  tasks.forEach((t,i)=>{
    let duration=t.duration;
    while(duration>0){
      let block=Math.min(duration,90);
      let taskDiv=document.createElement("div");
      taskDiv.className="task";
      taskDiv.draggable=true;
      taskDiv.style.background=priorityColors[t.priority]||"#fffaf0";
      let timeLabel=formatMinutesToTime(current)+"-"+formatMinutesToTime(current+block);
      taskDiv.innerHTML=`<span class="task-time">${timeLabel}</span><input type="checkbox" id="cb-${i}-${current}"><span>${t.name} ${emojis[t.priority]||''}</span>`;
      let checkbox=taskDiv.querySelector("input[type='checkbox']");
      checkbox.addEventListener("change",(e)=>{
        if(e.target.checked){taskDiv.classList.add("done"); confettiBurst();}
        else{taskDiv.classList.remove("done");}
      });

      // Drag & drop events
      taskDiv.addEventListener('dragstart', handleDragStart);
      taskDiv.addEventListener('dragend', handleDragEnd);
      taskDiv.addEventListener('dragover', handleDragOver);
      taskDiv.addEventListener('drop', handleDrop);

      output.appendChild(taskDiv);
      current+=block;
      duration-=block;
      minSinceBreak+=block;
      if(minSinceBreak>=breakInterval){current+=10; minSinceBreak=0;}
    }
  });
});
</script>
</body>

</html>



